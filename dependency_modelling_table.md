# Dependency modelling comparision table for 5 software ecosystems

## Selected packaging ecosystems

**Maven**: an Apache software used for software project management and comprehension tool based on the concept of project object model(POM). https://maven.apache.org/ <br>
**NPM**: a node package management tool for Node.js runtime environment and JavaScript web applicaiton frameworks, libraries, and utilities started in 2010. NPM registry currently hosts over 1,000,000 packages with 11,000,000,000 weekly and 49,000,000,000 monthly downloads, it is the largest considered ecosystem. https://www.npmjs.com/ <br>
**CRAN**: the Comprehensive R Archive Network that stores identical, up-to-date, versions of code and documentation for statistical computing enviroment R. https://cran.r-project.org/ <br>
**dpkg**: a package manager for Debian-based systems. As of July 30th 2019, Debian stable version contains 28,497 packages in main section. http://man7.org/linux/man-pages/man1/dpkg.1.html <br>
**Cargo**: the official package manager for Rust programming language since 2014. Rust is a modern system-level programming language released in 2012 by Mozilla. I expect to see Rust community carry out the best practices in dependency management given the fact it is a young and trending platform. https://crates.io/ <br>

## Table

|                                  | Maven                                                                                                                                                     | NPM                                                                                                                                                                                                                                                         | CRAN                                                                                                                                                     | dpkg                                            | Cargo                                                                                                                                         |
| -------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------- | ----------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------- |
| software ecosystem               | Java / Apache                                                                                                                                             | JavaScript / Node.js                                                                                                                                                                                                                                        | R                                                                                                                                                        | Debian / Linux OS                               | Rust                                                                                                                                          |
| type of ecosystem                | packaging ecosystem                                                                                                                                       | packaging ecosystem                                                                                                                                                                                                                                         | packaging ecosystem                                                                                                                                      | distribution for Linux OSs                      | packaging ecosystem                                                                                                                           |
| metadata                         | pom.xml                                                                                                                                                   | package.json                                                                                                                                                                                                                                                | DESCRIPTION                                                                                                                                              | DEBIAN/control                                  | Cargo.toml                                                                                                                                    |
| general dependency               | dependencies, scope compile                                                                                                                               | dependencies                                                                                                                                                                                                                                                | Depends(attach), Imports(namespace required)                                                                                                             | Depends, Pre-Depends                            | dependencies                                                                                                                                  |
| build dependency                 |                                                                                                                                                           |                                                                                                                                                                                                                                                             | Build-Depends for source package                                                                                                                         | Build-Depends for source package                | build-dependencies                                                                                                                            |
| test/developer dependency        | scope test                                                                                                                                                | devDependencies                                                                                                                                                                                                                                             |                                                                                                                                                          |                                                 | dev-dependencies                                                                                                                              |
| optional dependency              | optional true                                                                                                                                             | optionalDependencies                                                                                                                                                                                                                                        | Suggests                                                                                                                                                 | Recommands, Suggests                            | optional = true                                                                                                                               |
| external dependency              | system scope(deprecated)                                                                                                                                  | provide external link, path instead version constraint                                                                                                                                                                                                      | through R CMD INSTALL -l path                                                                                                                            | through dpkg -i file,deb                        | registry=, git= branch=, path=                                                                                                                |
| dependency management mechanisms | dependencyManagement, scope import                                                                                                                        | peerDependencies                                                                                                                                                                                                                                            | relys on policy                                                                                                                                          | Conflicts, Breaks                               | name mangling                                                                                                                                 |
| dependency hell                  | JVM shadows the one appears earlier. Java also only runs the first one on the classpath                                                                   | both NPM dependent and required packages have dependencies stored under their own node_module folders, the peerDependencies field also mitigate the problem for intercommunication from different dependencies that requre same version range of a package  | CRAN only allows maintainer to install latest version of dependencies                                                                                    | Debian packages suffers from dependency hell    | Rust name-mangling scheme allow a project to have different versions of a same dependencies. But the intercommunication among them is blocked |
| architecture restriction         | yes, plugin requred(Maven Enforcer Rule API)                                                                                                              | yes, example: "cpu" : [ "x64", "ia32" ]                                                                                                                                                                                                                     | no, but supported during installation                                                                                                                    | yes, example: [linux-any], [!amd64], [any-i386] | no, but can be specified using RUSTFLAGS in cargo configuration file                                                                          |
| name versioning                  | semvar                                                                                                                                                    | semvar recommended                                                                                                                                                                                                                                          | major.minor.patch.dev                                                                                                                                    | [epoch:]upstream_version[-debian_revision]      | semvar recommended                                                                                                                            |
| version constraints              | range sets(open'()' and square'[]' brackets), multiple(separated by a comma)                                                                              | caret(^), tilde(~), wildcard(*), inequality(<,>,=), multiple                                                                                                                                                                                                |  inequality(<,>,=)                                                                                                                                       |  inequality(<,>,=), multiple                    | caret(^), tilde(~), wildcard(*), inequality(<,>,=)                                                                                            |
| community value and policy       | Maven recommends maintainer to use Java @Deprecated tag for APIs that are no longer supported. Maven also sets high standards for publication of releases | Since JavaScript doesn't come with as many standard libraries as in other programming languages, NPM packages tend to depend on grea amount of trivial packages or micro packages that only contains few simple functions                                   | rolling release(to always include the latest dependencies) + R CMD check tool check for compatibility. Fail to do so will result to get package archived |                                                 |                                                                                                                                               |
| package removal policy           | not allowed to remove releases from repository                                                                                                            | only allow to unpublish versions published in the last 72 hours. NPM recommends owners to use deprecate                                                                                                                                                     | CRAN archives package                                                                                                                                    |                                                 | Cargo explicitly prevent packages from being removed, solution is cargo yank                                                                  |

## References
Alexandre Decan, Tom Mens, Philippe. "An Empirical Comparision of Dependency Network Evolution in Seven Software Packaging Ecosystems", *Empirical Software Engineering*. Feb 2018<br>
https://stephencoakley.com/2019/04/24/how-rust-solved-dependency-hell<br>
https://www.debian.org/doc/debian-policy/ch-relationships.html<br>
https://docs.npmjs.com/files/package.json<br>
http://r-pkgs.had.co.nz/description.html<br>
https://cran.r-project.org/web/packages/pkgnet/vignettes/pkgnet-intro.html<br>
https://doc.rust-lang.org/cargo/reference/publishing.html#cargo-yank<br>
